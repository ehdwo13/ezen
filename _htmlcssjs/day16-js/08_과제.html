<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 구구단 문제 -->
    <h1>
        <button id="exam">문제 출제</button>
    </h1>
    <ol id="ans"></ol>
    <h1>
        <button id="result">정답 확인</button>
    </h1>
    <h3 id="printRatio"></h3>
    <script>
        ansObj = {};    //객체생성
        let str = "";
        let correctRate = 0; //정답체크
        // 반복문
        function makeRan(max, min){
            return Math.floor(Math.random()*(max-min+1))+min;
        }
        document.getElementById('exam').addEventListener('click',()=>{
            for(let count=1; count<=10; count++){
                let dan = makeRan(9,2);
                let incre = makeRan(9,1);
                ansObj[`ans${count}`] = dan * incre ;   //객체에 key = anscount : value = 곱한결과저장
                str = `${dan} * ${incre}`;
                document.getElementById('ans').innerHTML+=`<li> ${str} = <input type="text" id="userAns${count}"></li>`;
            }
        })
        document.getElementById('result').addEventListener('click',()=>{
            // userInput.style.backgroundColor = 'green';
            // 모든 input박스의 값비교, 추가구문위해 다시 for문
            for(let count=1; count<=10; count++){
                let check = document.getElementById(`userAns${count}`)   //input박스의 객체생성
                if(ansObj[`ans${count}`] == check.value){                //ansObj[key]는 value 리턴 == input박스 value 값 비교
                    correctRate++;
                    check.style.backgroundColor= "green";    //정답일시 input박스 배경색변경
                    check.value += ` : 정답`;
                }else{
                    check.style.backgroundColor = "red";
                    check.value += `: 오답`;
                }
            }
            document.getElementById(`printRatio`).innerText = 
            `정답 개수 : ${correctRate} / 정답률 : ${(correctRate/Object.keys(ansObj).length).toFixed(2)*100}%`;
        })
    </script>
</body>
</html>